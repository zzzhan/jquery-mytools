/*! jquery-mytools 2016-03-15 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):window.jQuery&&a(window.jQuery)}(function(a){var b=function(b,c){this._el=b,this._opt=c,a(this._el).on("submit",a.proxy(this._submit,this))};b.prototype={_submit:function(){var b=a(this._el);return b.trigger("mf.submit"),this._doSubmit(),!1},_submited:function(b){var c=a(this._el);c.trigger("mf.submited",b)},_doSubmit:function(){var b=a(this._el);a.ajax({method:b.attr("method")||"POST",url:b.attr("action"),data:b.serialize(),success:a.proxy(this._submited,this)})}},a.fn.myform=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("myform"),g="object"==typeof c?c:{};f||"string"==typeof c?"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(d,1)):e.data("myform",new b(this,g))})}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):window.jQuery&&a(window.jQuery)}(function(a){var b=function(b,c){var d=this;d._el=b,d._opt=c,a(b).on("click","li",a.proxy(d._selected,this))};b.prototype={init:function(b){for(var c=this,d=a(c._el),e="",f=0;f<b.length;f++)e+=c._li(b[f]);d.empty(),d.append(a(e)),c._data=b},_li:function(a){var b=this,c=b._opt,d=a;return"function"==typeof c.renderer&&(d=c.renderer(a)),'<li><a href="#">'+d+"</a></li>"},_selected:function(b){var c=this,d=a(c._el),e=c._data,f=d.children().index(b.currentTarget);d.trigger("selected",e[f])},find:function(a){for(var b=this,c=b._data,d=null,e=0;e<c.length;e++){var f=c[e];if(a(f)){d=f;break}}return d}},a.fn.mylist=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("mylist"),g="object"==typeof c?c:{};f||"string"==typeof c?"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(d,1)):e.data("mylist",new b(this,g))})}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):window.jQuery&&a(window.jQuery)}(function(a){var b=function(b,c){this._el=b,this._opt=c,this._data=[],this._init();var d=a(b);this._multiSelectable(d.data("selectabled")||!!c.selectabled),d.delegate("td[data-editabled=true] input","focusout",a.proxy(this._editFocusout,this)),d.delegate("td[data-editabled=true]","click",a.proxy(this._cellClick,this))};b.prototype={constructor:b,_init:function(){for(var b=this,c=a(b._el),d=b._opt,e=d.header,f="<thead><tr>",g=0;g<e.length;g++){var h=e[g];f+="<th>"+(h.text||"")+"</th>"}f+="</tr></thead>",c.append(a(f))},_cell:function(a,b,c){var d=null,e=b[a.key]||"";return"function"==typeof a.renderer&&(e=a.renderer(b,c,a)),d=a.input?'<input type="'+a.input+'" name="'+a.key+'" value="'+e+'" >':e},insert:function(b,c){for(var d=this,e=a(d._el),f=d._opt,g=f.header,h="<tr>",i=d._data,j=0;j<g.length;j++){var k=g[j];h+='<td data-editabled="',h+=!!k.editabled,h+='">',h+=d._cell(k,b,c),h+="</td>"}return h+="</tr>",e.append(a(h).data("row",b)),i[i.length]=b,e.trigger("update"),d},update:function(b,c,d){var e=this,f=a(e._el);void 0!==c&&this._update(b,c,d),this.refresh(b),f.trigger("update")},_update:function(b,c,d){var e=this,f=this._data,g=a(e._el),h=e._opt,i=h.header,j=a("tr:eq("+(b+1)+")",g),k=a("td:eq("+c+")",j),l=d;return f[b][i[c].key]!==d&&(f[b][i[c].key]=d),"function"==typeof i[c].renderer&&(l=i[c].renderer(f[b],i[c])),k.html(l),e},refresh:function(a){var b=this._data;if("number"==typeof a)this._refreshRow(a);else for(a=0;a<b.length;a++)this._refreshRow(a)},_refreshRow:function(a){for(var b=this._data,c=b[a],d=this._opt.header,e=0;e<d.length;e++)this._update(a,e,c[d[e].key])},uuid:function(a){var b=this._opt;return"function"==typeof b.uuid?b.uuid(a):a.id},remove:function(b){for(var c=this,d=a(c._el),e=c._data,f=function(a){for(var d=!1,e=0;b&&e<b.length;e++){var f=b[e];if(a===c.uuid(f)){d=!0;break}}return d},g=0;g<e.length;){var h=a("tr:eq("+(g+1)+")",d),i=e[g];f(c.uuid(i))?(e.splice(g,1),h.remove()):g++}return d.trigger("update"),c},removeAll:function(){var b=this,c=a(b._el),d=b._data;d.splice(0,d.length),a("tr:gt(0)",c).remove(),c.trigger("update")},selecteds:function(){for(var b=this,c=a(b._el),d=b._data,e=[],f=0;f<d.length;f++){var g=a("tr:eq("+(f+1)+")",c);g.is(".active")&&(e[e.length]=d[f])}return e},data:function(a){var b=this;if(void 0!==a){this.removeAll();for(var c=0;c<a.length;c++){var d=a[c];b.insert(d,c)}return b}return b._data},select:function(b){var c=this,d=a(c._el),e=this._opt;e.selectabled&&("number"==typeof b?a("tr:eq("+(b+1)+")",d).toggleClass("active"):a("tr:gt(0)",d).toggleClass("active"))},_multiSelectable:function(b){var c=this,d=a(c._el);b&&d.on("click","tr:gt(0)",function(b){var c=a(b.currentTarget);c.addClass("active"),c.siblings().removeClass("active")})},_editFocusout:function(b){var c=this,d=c._data,e=a(c._el),f=c._opt,g=f.header,h=a(b.target),i=h.closest("td"),j=h.closest("tr"),k=a("tr:gt(0)",e).index(j),l=a("td",j).index(i),m=h.val(),n=d[k][g[l].key];try{"float"===g[l].type&&(m=parseFloat(m)),"int"===g[l].type&&(m=parseInt(m))}catch(b){console.log(b)}m!==n?(this._row=k,this._col=l,this._val=n,this.update(k,l,m),e.trigger("edit",[d[k],g[l],n])):this._update(k,l,m)},reset:function(){this.update(this._row,this._col,this._val)},placeCaretAtEnd:function(a){if("undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var b=document.createRange();b.selectNodeContents(a),b.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(b)}else if("undefined"!=typeof document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(a),d.collapse(!1),d.select()}},_cellClick:function(b){var c=a(this._el),d=this._opt,e=this._data,f=a(b.target),g=f.closest("tr"),h=d.header,i=a("tr:gt(0)",c).index(g),j=a("td",g).index(f);if(f.is("td")){var k=e[i][h[j].key],l=a('<input name="temp" value="'+k+'" />');f.empty(),f.append(l),l.focus()}},col:function(a){for(var b=this._opt.header,c=-1,d=0;d<b.length;d++)if(a===b[d].key){c=d;break}return c}},a.fn.mytable=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("mytable"),g="object"==typeof c?c:{};f||"string"==typeof c?"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(d,1)):e.data("mytable",new b(this,g))})}});